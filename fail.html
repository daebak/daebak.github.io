<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HizBee | ê²°ì œ ì‹¤íŒ¨</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        :root {
            --primary-color: #38bdf8; /* ë¼ì´íŠ¸ ë¸”ë£¨ */
            --dark-color: #0b1120; /* ë‹¤í¬ ë„¤ì´ë¹„ ë°°ê²½ */
            --light-color: #1e293b; /* ì¹´ë“œ ë“± ë³´ì¡° ë°°ê²½ */
            --text-color: #e2e8f0; /* ê¸°ë³¸ í…ìŠ¤íŠ¸ (ë°ì€ íšŒìƒ‰) */
            --text-light: #94a3b8; /* ë³´ì¡° í…ìŠ¤íŠ¸ (íšŒìƒ‰) */
            --border-color: #334155;
            --white-color: #ffffff;
            --error-color: #f87171; /* ì‹¤íŒ¨ ë¹¨ê°„ìƒ‰ */
        }
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: var(--dark-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .header-logo {
            height: 30px;
            margin-bottom: 2rem;
        }
        .container {
            background-color: var(--light-color);
            padding: 2.5rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 550px;
            text-align: center;
            border: 1px solid var(--border-color);
        }
        h1 {
            color: var(--error-color); /* ì‹¤íŒ¨ ê°•ì¡° */
            margin-bottom: 1rem;
            font-size: 2rem;
        }
        p {
            margin-bottom: 1rem;
            color: var(--text-light);
        }
        .error-details {
            background-color: var(--dark-color);
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            margin-bottom: 2rem;
            text-align: left;
            border: 1px solid var(--border-color);
            font-size: 0.95em;
            word-break: break-all;
        }
        .error-details strong {
            color: var(--primary-color);
            display: inline-block;
            min-width: 100px;
        }
        .error-details span {
            color: var(--text-color);
        }
        .btn {
            display: inline-block;
            padding: 0.9rem 2.2rem;
            border-radius: 8px;
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
        }
        .btn-outline {
            background: transparent;
            color: var(--white-color);
            border: 1px solid var(--border-color);
            margin-right: 1rem;
        }
        .btn-outline:hover {
            background-color: var(--dark-color);
        }
        .btn-primary {
            background: linear-gradient(90deg, #38bdf8, #3b82f6);
            color: var(--white-color);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }
        .footer-link {
            margin-top: 2rem;
            font-size: 0.9rem;
        }
        .footer-link a {
            color: var(--primary-color);
            text-decoration: none;
        }
        .footer-link a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <a href="index.html">
        <img src="./ì•„ì´ì½˜(ë°˜ë°˜).png" alt="HizBee ë¡œê³ " class="header-logo" />
    </a>
    <div class="container">
        <h1>ğŸš§ ê²°ì œ ì‹¤íŒ¨</h1>
        <p>ê²°ì œë¥¼ ì™„ë£Œí•˜ëŠ” ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì•„ë˜ ì˜¤ë¥˜ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.</p>

        <div class="error-details">
            <p><strong>ì˜¤ë¥˜ ì½”ë“œ:</strong> <span id="errorCodeDisplay"></span></p>
            <p><strong>ì˜¤ë¥˜ ë©”ì‹œì§€:</strong> <span id="errorMessageDisplay"></span></p>
            <p><strong>ì£¼ë¬¸ ID:</strong> <span id="orderIdDisplay"></span></p>
        </div>

        <a href="payment.html" id="retryButton" class="btn btn-outline">ê²°ì œ ë‹¤ì‹œ ì‹œë„</a>
        <a href="index.html" class="btn btn-primary">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>
    <div class="footer-link">
        <p>ë¬¸ì œê°€ ì§€ì†ë  ê²½ìš° ê³ ê°ì„¼í„°ë¡œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.</p>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const errorCode = urlParams.get('code');
        const errorMessage = urlParams.get('message');
        const orderId = urlParams.get('orderId'); // payment.htmlì—ì„œ ì „ë‹¬í•œ íŒŒë¼ë¯¸í„°

        const errorCodeDisplay = document.getElementById('errorCodeDisplay');
        const errorMessageDisplay = document.getElementById('errorMessageDisplay');
        const orderIdDisplay = document.getElementById('orderIdDisplay');
        const retryButton = document.getElementById('retryButton');

        errorCodeDisplay.textContent = errorCode || 'N/A';
        errorMessageDisplay.textContent = decodeURIComponent(errorMessage) || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
        orderIdDisplay.textContent = orderId || 'N/A';

        // 'ê²°ì œ ë‹¤ì‹œ ì‹œë„' ë²„íŠ¼ì— ì´ì „ ê²°ì œ ì‹œë„ì˜ ì£¼ë¬¸ IDë¥¼ ì „ë‹¬í•  ìˆ˜ë„ ìˆìœ¼ë‚˜,
        // ì¼ë°˜ì ìœ¼ë¡œëŠ” ìƒˆë¡œìš´ ì£¼ë¬¸ìœ¼ë¡œ ì²˜ë¦¬í•˜ë¯€ë¡œ, payment.htmlë¡œ íŒŒë¼ë¯¸í„° ì—†ì´ ë³´ë‚´ê±°ë‚˜,
        // ì´ì „ í˜ì´ì§€ì—ì„œ í”Œëœ ì •ë³´ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì˜¤ë„ë¡ ìœ ë„í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
        // ì—¬ê¸°ì„œëŠ” payment.htmlë¡œ ëŒì•„ê°€ë˜, ì–´ë–¤ í”Œëœì´ì—ˆëŠ”ì§€ ì •ë³´ê°€ ì—†ìœ¼ë¯€ë¡œ ì‚¬ìš©ìê°€ ë‹¤ì‹œ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤.
        // ë§Œì•½ orderIdë¥¼ í†µí•´ ì´ì „ í”Œëœ ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ë°±ì—”ë“œê°€ ìˆë‹¤ë©´, í•´ë‹¹ ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬ payment.htmlë¡œ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        // í˜„ì¬ëŠ” payment.htmlì´ URL íŒŒë¼ë¯¸í„°ë¡œ plan, price, planNameì„ ê¸°ëŒ€í•˜ë¯€ë¡œ, ì´ ì •ë³´ ì—†ì´ëŠ” ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        // ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ index.htmlë¡œ ë³´ë‚´ëŠ” ê²ƒì…ë‹ˆë‹¤.

        // retryButton.href = `payment.html`; // ì´ë ‡ê²Œ í•˜ë©´ payment.htmlì—ì„œ ì •ë³´ ë¶€ì¡± ì˜¤ë¥˜ ë°œìƒ
        // ë” ë‚˜ì€ ë°©ë²•ì€ index.htmlë¡œ ë³´ë‚´ì„œ ë‹¤ì‹œ í”Œëœì„ ì„ íƒí•˜ê²Œ í•˜ëŠ” ê²ƒ
        retryButton.href = 'index.html';
        // ë˜ëŠ”, ë§Œì•½ payment.htmlì—ì„œ ì „ë‹¬ë°›ì€ plan, price, planNameì„ failUrlì—ë„ ë„˜ê²¼ë‹¤ë©´ ì¬ì‹œë„ ê°€ëŠ¥
        // ì˜ˆ: failUrl: `${baseUrl}/fail.html?orderId=${orderId}&code=${code}&message=${message}&plan=${plan}&price=${price}&planName=${planName}`
        // const originalPlan = urlParams.get('plan');
        // const originalPrice = urlParams.get('price');
        // const originalPlanName = urlParams.get('planName');
        // if (originalPlan && originalPrice && originalPlanName) {
        //    retryButton.href = `payment.html?plan=${originalPlan}&price=${originalPrice}&planName=${originalPlanName}`;
        // }


        if (errorCode) {
            console.error(`Payment failed: ${errorCode} - ${decodeURIComponent(errorMessage)} (Order ID: ${orderId})`);
        }
    </script>
</body>
</html>
